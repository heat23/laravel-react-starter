echo "ğŸ” Running pre-commit checks..."

# 1. Run Pint (code style)
echo "ğŸ“ Checking PHP code style..."
./vendor/bin/pint --test || {
  echo "âŒ Pint failed. Run './vendor/bin/pint' to fix."
  exit 1
}

# 2. Run PHPStan (static analysis)
if [ -f "vendor/bin/phpstan" ]; then
  echo "ğŸ”¬ Running PHPStan..."
  ./vendor/bin/phpstan analyse --memory-limit=1G || {
    echo "âŒ PHPStan failed. Fix type errors before committing."
    exit 1
  }
fi


# # 4. Run frontend lint
# echo "ğŸ¨ Running ESLint..."
# npm run lint || {
#   echo "âŒ ESLint failed. Run 'npm run lint -- --fix' to fix."
#   exit 1
# }

# # 5. Run TypeScript check
# echo "ğŸ“˜ Running TypeScript check..."
# npx tsc --noEmit || {
#   echo "âŒ TypeScript errors found. Fix before committing."
#   exit 1
# }

echo "âœ… All pre-commit checks passed!"
